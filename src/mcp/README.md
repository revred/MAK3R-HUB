# MAK3R-HUB MCP Service

## Overview
The MAK3R-HUB Model Context Protocol (MCP) service enables Claude to make secure, authenticated calls to external services through a trusted local gateway. This includes integrations with payment processors (Stripe), AI services (OpenAI), cloud platforms, and other APIs while maintaining security boundaries.

## Architecture

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   Claude Code   │◄──►│  MCP Server     │◄──►│  External APIs  │
│                 │    │  (Local)        │    │  (Stripe, etc.) │
└─────────────────┘    └─────────────────┘    └─────────────────┘
                              │
                       ┌─────────────────┐
                       │  Secure Store   │
                       │  (Credentials)  │
                       └─────────────────┘
```

## Features

### 🔐 Secure Credential Management
- Encrypted local credential storage
- OAuth 2.0 / API key management
- Environment-based configuration
- Automatic credential rotation support

### 🌐 External API Integrations
- **Payment Processing**: Stripe, PayPal, Square
- **AI Services**: OpenAI GPT-4, Claude API, Gemini
- **Cloud Platforms**: AWS, Azure, Vercel, Netlify
- **Development Tools**: GitHub, GitLab, Docker Hub
- **Analytics**: Google Analytics, Plausible, Mixpanel

### ⚡ Real-time Capabilities
- WebSocket connections for live data
- Server-sent events for notifications
- Background task processing
- Caching and rate limiting

### 🛡️ Security Features
- Request signing and validation
- IP whitelisting
- Rate limiting per API
- Audit logging
- Secure token storage

## Quick Start

### 1. Start MCP Service
```bash
MAK3R-HUB mcp start --port 3001
```

### 2. Configure Credentials
```bash
MAK3R-HUB mcp config stripe --api-key sk_live_...
MAK3R-HUB mcp config openai --api-key sk-...
```

### 3. Test Integration
```bash
MAK3R-HUB mcp test stripe --method list_customers
MAK3R-HUB mcp test openai --prompt "Analyze this codebase"
```

## Available Tools

### Payment Processing
- `mcp__stripe__create_payment_intent`
- `mcp__stripe__list_customers`
- `mcp__stripe__create_subscription`
- `mcp__paypal__create_order`

### AI Research & Analysis
- `mcp__openai__chat_completion`
- `mcp__openai__analyze_code`
- `mcp__claude__research_domain`
- `mcp__gemini__generate_content`

### Cloud Operations
- `mcp__aws__deploy_lambda`
- `mcp__vercel__deploy_site`
- `mcp__netlify__deploy_site`

### Development Tools
- `mcp__github__create_repo`
- `mcp__github__create_pr`
- `mcp__docker__build_image`

## Configuration

### Credentials File
Location: `~/.mak3r-hub/credentials.json` (encrypted)

```json
{
  "stripe": {
    "api_key": "sk_live_...",
    "webhook_secret": "whsec_...",
    "environment": "production"
  },
  "openai": {
    "api_key": "sk-...",
    "organization": "org-...",
    "model_preference": "gpt-4"
  }
}
```

### Environment Variables
```bash
MAK3R_HUB_MCP_PORT=3001
MAK3R_HUB_MCP_HOST=localhost
MAK3R_HUB_ENCRYPTION_KEY=<auto-generated>
MAK3R_HUB_LOG_LEVEL=info
```

## Security Best Practices

1. **Credential Isolation**: Each service uses separate credentials
2. **Least Privilege**: Minimal required permissions
3. **Audit Logging**: All API calls logged with timestamps
4. **Rate Limiting**: Prevent abuse and API quota exhaustion
5. **Local Only**: MCP server only accessible locally by default

## Development

### Adding New Integrations
1. Create handler in `src/mcp/handlers/`
2. Add authentication logic
3. Define tool schema
4. Add tests
5. Update documentation

### Testing
```bash
npm run test:mcp
npm run test:mcp:integration
```

## Troubleshooting

### Common Issues
- **Connection Failed**: Check if MCP service is running
- **Authentication Error**: Verify API credentials
- **Rate Limited**: Check API usage limits
- **Permission Denied**: Review API key permissions

### Logs
```bash
MAK3R-HUB mcp logs --tail 100
MAK3R-HUB mcp logs --grep "error"
```